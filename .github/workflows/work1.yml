name: work1

on: [push]

jobs:
  build:

    runs-on: windows-latest

    steps:
    - uses: actions/checkout@v1
      uses: actions/setup-dotnet@v1
    - name: Get version
      run: dotnet --version
    - name: Get vars
      run: |
        echo OS is %OS%
        echo PATH=%PATH%
    - name: Build, test, deploy
      run: |
        echo building Debug
        msbuild -t:WcMvvm461 -p:Configuration=Debug -p:Platform="Any CPU"
        msbuild -t:Test472 -p:Configuration=Debug -p:Platform="Any CPU"
        echo testing Debug
        vstest.console Test472\bin\Debug\Test472.dll
        echo building Release
        msbuild -t:WcWpfMvvm -p:Configuration=Debug -p:Platform="Any CPU"
        msbuild -t:WcMvvm461 -p:Configuration=Release -p:Platform="Any CPU"
        msbuild -t:Test472 -p:Configuration=Release -p:Platform="Any CPU"
        msbuild -t:WcWpfMvvm -p:Configuration=Release -p:Platform="Any CPU"
        echo test Release
        dotnet vstest Test472\bin\Release\Test472.dll
        echo deploying
        where vstest.console.exe
